<% if Helpers.is_logged_in?(session) %>
<% @current_user = Helpers.current_user(session) %>
<div class="container my-5">
  <div class="row">
    <div class="col-sm-4">
      <div class="card border-primary mb-3" style="max-width: 18rem;">
    <div class="card-header text-primary">
      <h4>Create Petition</h4>
    </div>
    <div class="card-body bg-primary text-white">
      <h5 class="card-title">New Petition</h5>
      <p class="card-text">Click "New Petition" below to create a new academic petition</p>
      <a href="/petitions/new" role="button" name="new_petition" type="button" class="btn btn-light">New Petition</a>
    </div>
  </div>
    </div>
    <div class="col-sm-8">
      <div class="card-group">
        <div class="card border-success mb-3" style="max-width: 18rem;">
          <div class="card-header text-success">
            <h4>View Petition</h4>
          </div>
          <div class="card-body bg-success text-white">
            <h5 class="card-title">Viewing A Student Petition</h5>
            <p class="card-text">To view a petition, click the "view" button in the "Edit" column of the petition row you wish to view.</p>
          </div>
        </div>
        <div class="card border-warning mb-3" style="max-width: 18rem;">
          <div class="card-header text-warning">
            <h4>Edit Petition</h4>
          </div>
          <div class="card-body bg-warning text-white">
            <h5 class="card-title">Deleting a Student Petition</h5>
            <p class="card-text">To delete a petition, click the "delete" in the "Edit" column of the petition row you wish to edit.</p>
          </div>
        </div>
        <div class="card border-danger mb-3" style="max-width: 18rem;">
          <div class="card-header text-danger">
            <h4>Delete Petition</h4>
          </div>
          <div class="card-body bg-danger text-white">
            <h5 class="card-title">Deleting A Student Petition</h5>
            <p class="card-text">To delete a student's petition, click the "edit" button in the "Edit" column of the petition row you wish to delete.</p>
          </div>
  </div>
      </div>
    </div>
  </div>
  <div class="table-responsive">
    <table class="table table-striped table-sm">
      <thead>
        <tr>
          <th>First Name</th>
          <th>Last Name</th>
          <th>UGA MyID</th>
          <th>Petition Type</th>
          <th>Request</th>
          <th>Edit</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <% @current_user.petitions.collect do |p| %>
          <td><%= p.student.first_name %></td>
          <td><%=  p.student.last_name %></td>
          <td><%=  p.student.uga_myid %></td>
          <td><%= p.petition_type %></td>
          <td><%= p.content %></td>
          <td>
            <a class="btn btn-success" href="/petitions/<%= p.id %>/view" role="button">view</a>
            <a class="btn btn-warning" href="/petitions/<%= p.id %>/edit" role="button">edit</a>
            <a class="btn btn-danger" href="/petitions/<%= p.id %>/delete" role="button">delete</a>
          </td>
        </tr>
      <% end %>
      </tbody>
    </table>
  </div>
</div>
  <% else %>
  <div class="alert alert-danger d-flex align-items-center" role="alert">
    <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/></svg>
    <div>
      You are not authorized to view this page!
    </div>
  </div>
<% end %>